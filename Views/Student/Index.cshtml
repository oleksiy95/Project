@model IEnumerable<CourseProject.Models.Student>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Surname)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Group)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Surname)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Group.Name)
            @Html.DisplayFor(modelItem => item.Group.EnrollmentYear)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Student_ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.Student_ID } ) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Student_ID } )
        </td>
    </tr>
}

</table>


<h3>Student Upload</h3>
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{        
     <input type="file" name="Files" id="Files" />
     <br />
     <input type="submit" name="submit" value="Upload" /> 
}

@* Error message *@
@if (ViewBag.Feedback == "Upload complete")
{
<p style="color:green">@ViewBag.Feedback</p>
}
else
{
<p style="color:red">@ViewBag.Feedback</p>    
}
<p style="color:red">@Html.Raw(ViewBag.ErrorMassage)</p>

@if (ViewBag.ErrorsInCSV == "true")
{
    @Html.ActionLink("Download file with wrong data", "DownloadFile");
}